<html>

<head>
  <script>

    //UTILITIES:
    const inputField = () => document.getElementById('input-field')
    const getTextFromInputField = () => inputField().value
    const reverseIn5sec = (callback) => setTimeout(callback, 5000)

    const disableBtn = (elem) => elem.setAttribute('disabled', true)
    const enableBtn = (elem) => elem.removeAttribute('disabled')
    const writeToInput = (inElem, text) => {
      inElem.value = text
      disableBtn(inElem)
      reverseIn5sec(() => { enableBtn(inElem); inElem.value = '' })
    }


    /* EXERCISE 1
    Write a function for changing the title of the document in something else.
    */

    const changeTitle = function (newTitle) {
      let elem = document.querySelector('header>h1')
      let prev = elem.innerHTML
      elem.innerHTML = newTitle
      return prev
    };

    /* EXERCISE 2
    Write a function for changing the class of the title of the page in "myHeading".
    */

    const addClassToTitle = function (flag, classStr) {
      let elem = document.querySelector('header>h1')
      flag ? elem.classList.add(classStr) : elem.classList.remove(classStr)
    };

    /* EXERCISE 3
    Write a function for changing the text of only the p which are children of a div.
    */

    const changePcontent = function (flag, text, prev) {
      let pList = document.querySelectorAll('div>p')
      prev = flag ? (() => { 
        let prevContArray = []
        for (let i = 0; i < pList.length; i++) {
          prevContArray.push(pList[i].innerText)
          pList[i].innerText = text
        }
        return prevContArray })()
      : (() => {
        for (let i = 0; i < pList.length; i++) {
          pList[i].innerText = prev[i]
        }
        return prev
      })()
      return prev
    }

    /* EXERCISE 4
    Write a function for changing the destination of every link to https://www.google.com
    */

    const changeUrls = function ( flag, text, prev ) {
      let linksList = document.getElementsByTagName('a')
      return flag 

      ? (() => {
        let prevContArray = []
        for (let i = 0; i < linksList.length; i++) {
          prevContArray.push(linksList[i].attributes['href'])
          linksList[i].setAttribute('href',text)
        }
        return prevContArray })()

      : (() => {
        for (let i = 0; i < linksList.length; i++) {
          linksList[i].setAttribute('href',prev[i] ) 
        }
        return prev
        })()
      
    };

    /* EXERCISE 5
     Write a function for adding a new item in the second list.
     */

    const addToTheSecond = function (flag , content, listItemNode) {
      let secondList = document.getElementById('secondList')
      return flag
      ? (()=>{
        
        listItemNode = document.createElement('li')
        listItemNode.innerText = content
        secondList.appendChild(listItemNode)
        return listItemNode
      })()
      : (()=>{
        secondList.removeChild(listItemNode)
      })()
    };

    /* EXERCISE 6
    Write a function for adding a second paragraph to the div.
    */

    const addParagraph = function (flag , content, listItemNode) {
      let divWithP = document.querySelector('div>p').parentElement
      return flag
      ? (()=>{
        pNode = document.createElement('p')
        pNode.innerText = content
        divWithP.appendChild(pNode)
        return pNode
      })()
      : (()=>{
        divWithP.removeChild(pNode)
      })()}

    /* EXERCISE 7
    Write a function for making the first UL disappear.
    */

    const firstUlDisappear = function (flag , content ) {
      let firstUl = document.getElementById('firstList')
      flag
      ? (()=>{
        let original = firstUl.style.backgroundColor
        firstUl.style.color = '#FF0000' 
        setTimeout( () => firstUl.setAttribute('hidden', true)  , 2000)
        setTimeout( () => firstUl.style.color = original  , 2001 )  
      })()
      : (()=>{
        firstUl.removeAttribute('hidden')
      })()}

    /* EXERCISE 8
    Write a function for making the background of every UL green.
    */

    const paintItGreen = function (flag , prev) {
      let UlList = document.getElementsByTagName('ul')
      return flag
      ? (()=>{
        prev = UlList[0].style.backgroundColor
        for (let i = 0; i < UlList.length; i++) {
          UlList[i].style.backgroundColor = 'green' }
        return prev
      })()
      : (()=>{
        for (let i = 0; i < UlList.length; i++) {
        UlList[i].style.backgroundColor = prev }
      })()
    };

    /* EXERCISE 9
    Make the heading of the page change color every time the user clicks on it.
    */

    const makeItClickable = function (flag , prev) {
      let headerElem = document.getElementsByTagName('header')[0]
      return flag
      ? (()=>{
        headerElem.onclick = function() {
          let randomColor = Math.floor(Math.random()*16777215).toString(16);
          headerElem.style.color = randomColor
        }
        return headerElem
      })()
      : (()=>{
        headerElem.removeAttribute('onClick')
        headerElem.style.color = 'black'
      })()
    };

    /* EXERCISE 10
    Change the footer text with something else when the user clicks on it.
    */

    const changeFooterText = function (flag , content, prev) {
      let footerElem = document.getElementsByTagName('footer')[0].children[0]
      return flag 
      ? (()=>{
        let prev = footerElem.innerText
        footerElem.innerText = content
        return prev
      })()
      : (()=>{
        footerElem.innerText = prev
      })()
    };

    /* EXERCISE 11
    Attach an event listener to the input field in the page for console logging its value just after any keystroke.
    */
    //declared Up in the code
    //const inputField = document.getElementById("input-field");
    // ...

    /* EXERCISE 12
    Create a new welcome alert message when the page successfully loads.
    */

    window.onload = function () {
      //
    };

    /* EXERCISE 13
    Use HTML5 tags to divide the content of the page in a more semantic way.
    */
  </script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <style>
    .myHeading {
      color: red;
    }
  </style>
</head>

<body>
  <div class="row">
    <div class="col-1">



    </div>
    <div class="col-11">
      <header>
        <h1>This is the title of the page</h1>
        <h2>This is the subtitle of the page</h2>
      </header>
    </div>
  </div>
  <div class="row">
    <div class="col-1">
      <div id="exercises" class="container text-center d-flex m-2" style="
      flex-direction: column;
      margin: 25px; padding: 10px;
      border-style: solid; border-radius: 3px; border-color: #667cde; box-shadow: 5px 5px 2px #667cde;
      ">
        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField(),'Exercise 1 Title' )
        let prev = changeTitle( getTextFromInputField() )
        reverseIn5sec( () => { changeTitle( prev ); enableBtn(this); } )
        ">
          EX 1
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField(),'text-success' )
        addClassToTitle( true , getTextFromInputField() )
        reverseIn5sec( () => { addClassToTitle( false , 'text-success' ); enableBtn(this); } )
        ">
          EX 2
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField(),'Exercise 3 paragraph' )
        let prev = changePcontent( true , getTextFromInputField() , null )
        reverseIn5sec( () => { changePcontent( false , null, prev ); enableBtn(this); } )
        ">
          EX 3
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField(),'https\:\/\/www.google.com' )
        let prev = changeUrls( true , getTextFromInputField() , null )
        reverseIn5sec( () => { changeUrls( false , null, prev ); enableBtn(this); } )
        ">
          EX 4
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField(),'EX 5 list item' )
        let prev = addToTheSecond( true , getTextFromInputField() )
        reverseIn5sec( () => { addToTheSecond( false,  null,  prev ); enableBtn(this); } )
        ">
          EX 5
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField(),'EX 6 paragraph' )
        let prev = addParagraph( true , getTextFromInputField() )
        reverseIn5sec( () => { addParagraph( false,  null,  prev ); enableBtn(this); } )
        ">
          EX 6
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        firstUlDisappear( true )
        reverseIn5sec( () => { firstUlDisappear( false ); enableBtn(this); } )
        ">
          EX 7
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        let prev = paintItGreen( true )
        reverseIn5sec( () => { paintItGreen( false , prev ); enableBtn(this); } )
        ">
          EX 8
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        let elem = makeItClickable( true )
        let timer = setInterval(() => elem.click(), 750 ) 
        reverseIn5sec( () => { makeItClickable( false ); enableBtn(this); clearTimeout(timer) } )
        ">
          EX 9
        </button>

        <button type="button" class="btn btn-dark m-2" onclick="
        disableBtn(this)
        writeToInput( inputField() ,'Exercise 10 FooterText' )
        let prev = changeFooterText( true , getTextFromInputField() )
        reverseIn5sec( () => { changeFooterText( false , null, prev ); enableBtn(this); } )
        ">
          EX 10
        </button>


      </div>
    </div>
    <div class="col-11">
      <main>
        <hr />

        <ul id="firstList">
          <li>1st</li>
          <li>2nd</li>
          <li>3rd</li>
        </ul>

        <ul id="secondList">
          <li>1st</li>
          <li>2nd</li>
          <li>3rd</li>
        </ul>

        <a href="strive.school">This link goes to Strive School</a>

        <div>
          <p>This text is just for the exercise</p>
        </div>

        <div>
          <input type="text" id="input-field" placeholder="input field for the exercise" />
        </div>
      </main>

      <footer>
        <p>And this text is just for the exercise too!</p>
      </footer>
    </div>
  </div>
</body>

</html>